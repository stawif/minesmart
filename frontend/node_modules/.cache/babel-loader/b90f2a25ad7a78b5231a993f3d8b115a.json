{"ast":null,"code":"var _jsxFileName = \"/Users/ashokbatesar/minesmart/frontend/src/components/account/PurchaseDebit.js\";\nimport React from 'react';\nimport Autocomplete from \"../entry/AutoComplete\";\nimport './account.css';\nimport Popup from \"reactjs-popup\";\n\nclass PurchaseDebit extends React.Component {\n  // Fetch machine list from server\n  // toggle load status\n  //form Handler Submitting\n  // Set final showing rows of table currentWork\n  constructor(props) {\n    super(props);\n\n    this.fetchProduct = async () => {\n      try {\n        const responsePartyList = await fetch(\"http://127.0.0.1:8000/list-of-purchaseparty/\");\n        const jsonPartyList = await responsePartyList.json();\n\n        if (jsonPartyList.length > 0) {\n          jsonPartyList.map(item => this.setState({\n            partyNamesFromApi: [...this.state.partyNamesFromApi, item.name]\n          }));\n        } else {\n          this.toggleLoadStatus();\n        }\n      } catch {}\n    };\n\n    this.toggleLoadStatus = async () => {\n      if (this.state.loadingStatus.visibility === \"visible\") {\n        await this.setState({\n          loadingStatus: {\n            visibility: \"hidden\"\n          },\n          loadedStatus: {\n            visibility: \"visible\"\n          }\n        });\n      } else {\n        await this.setState({\n          loadingStatus: {\n            visibility: \"visible\"\n          },\n          loadedStatus: {\n            visibility: \"hidden\"\n          }\n        });\n      }\n    };\n\n    this.onSubmit = async () => {\n      const responsDebitDetail = await fetch('http://127.0.0.1:8000/purchase-party-debit/', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"party\": this.state.selectedParty\n        })\n      });\n      const jsonDebitDetail = await responsDebitDetail.json();\n\n      if (jsonDebitDetail.debits.length != 0) {\n        this.setState({\n          minDate: jsonDebitDetail.debits[0].date\n        });\n        this.setState({\n          maxDate: jsonDebitDetail.debits.slice(-1)[0].date\n        });\n      }\n\n      this.setState({\n        debitDetail: jsonDebitDetail,\n        input: {\n          display: \"none\"\n        },\n        table: {\n          display: \"block\"\n        }\n      });\n    };\n\n    this.setDateFilter = (item, index) => {\n      if (!this.state.minFilterDate) {\n        this.state.minFilterDate = this.state.minDate;\n      }\n\n      if (!this.state.maxFilterDate) {\n        this.state.maxFilterDate = this.state.maxDate;\n      }\n\n      if (this.state.minFilterDate <= item.date && item.date <= this.state.maxFilterDate) {\n        this.state.currentDebit.push(item);\n      }\n    };\n\n    this.state = {\n      debitDetail: {\n        party: \"\",\n        contact: \"\",\n        village: \"\",\n        crasher: \"\",\n        debits: []\n      },\n      minDate: null,\n      maxDate: null,\n      minFilterDate: null,\n      maxFilterDate: null,\n      startDate: null,\n      endDate: null,\n      currentDebit: [],\n      selectedParty: \"\",\n      partyNamesFromApi: [],\n      input: {\n        display: \"block\"\n      },\n      table: {\n        display: \"none\"\n      },\n      loadingStatus: {\n        visibility: \"visible\"\n      },\n      loadedStatus: {\n        visibility: \"hidden\"\n      }\n    };\n    this.fetchProduct = this.fetchProduct.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.setDateFilter = this.setDateFilter.bind(this);\n    this.toggleLoadStatus = this.toggleLoadStatus.bind(this);\n    this.fetchProduct();\n  }\n\n  componentDidMount() {\n    this.toggleLoadStatus();\n  }\n\n  render() {\n    //Clean old data\n    this.state.currentDebit = []; //  fill current debit\n\n    this.state.debitDetail.debits.forEach(this.setDateFilter);\n    return React.createElement(\"div\", {\n      id: \"mainDiv\",\n      className: \"d-flex justify-content-center align-items-center scrollingSection\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"tableShow\",\n      style: this.state.table,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"upperHeader row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"blockquote\", {\n      className: \"commonFont blockquote text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, this.state.debitDetail.party)))), React.createElement(\"div\", {\n      className: \"col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"blockquote\", {\n      className: \"commonFont blockquote text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, this.state.debitDetail.contact))), React.createElement(\"div\", {\n      className: \"col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"blockquote\", {\n      className: \"commonFont blockquote text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, this.state.debitDetail.village))), React.createElement(\"div\", {\n      className: \"col-sm-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"date\",\n      min: this.state.minDate,\n      max: this.state.maxDate,\n      onChange: e => {\n        this.setState({\n          minFilterDate: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-sm-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"date\",\n      min: this.state.minDate,\n      max: this.state.maxDate,\n      onChange: e => {\n        this.setState({\n          maxFilterDate: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"highTable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(Popup, {\n      modal: true,\n      trigger: React.createElement(\"button\", {\n        className: \"bg-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Party\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, this.state.debitDetail.party), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, this.state.debitDetail.contact), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, this.state.debitDetail.village), React.createElement(\"input\", {\n      type: \"date\",\n      min: this.state.minDate,\n      max: this.state.maxDate,\n      onChange: e => {\n        this.setState({\n          minFilterDate: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"date\",\n      min: this.state.minDate,\n      max: this.state.maxDate,\n      onChange: e => {\n        this.setState({\n          maxFilterDate: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"lowerHeader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-borderd tablePart\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      className: \"thead-dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"Date\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"Debit Amount\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, \"Remark\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, this.state.currentDebit.map(debit => React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, debit.date), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, debit.debit_amount), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, debit.remark))))))), React.createElement(\"form\", {\n      className: \"form-container form-group\",\n      style: this.state.input,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      style: this.state.loadingStatus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, \"There is no purchase party\"), React.createElement(\"div\", {\n      style: this.state.loadedStatus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"headingViewPart\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, \"Purchase Party Debit\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }), React.createElement(Autocomplete, {\n      suggestions: this.state.partyNamesFromApi,\n      callbackFromParent: dataFromChild => {\n        this.state.selectedParty = dataFromChild;\n      },\n      placeholderfrom: \"Party name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-outline-dark\",\n      style: this.state.buttonStatus,\n      onClick: e => this.onSubmit(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, \"Show\"))));\n  }\n\n}\n\nexport default PurchaseDebit;","map":{"version":3,"sources":["/Users/ashokbatesar/minesmart/frontend/src/components/account/PurchaseDebit.js"],"names":["React","Autocomplete","Popup","PurchaseDebit","Component","constructor","props","fetchProduct","responsePartyList","fetch","jsonPartyList","json","length","map","item","setState","partyNamesFromApi","state","name","toggleLoadStatus","loadingStatus","visibility","loadedStatus","onSubmit","responsDebitDetail","method","headers","body","JSON","stringify","selectedParty","jsonDebitDetail","debits","minDate","date","maxDate","slice","debitDetail","input","display","table","setDateFilter","index","minFilterDate","maxFilterDate","currentDebit","push","party","contact","village","crasher","startDate","endDate","bind","componentDidMount","render","forEach","e","target","value","debit","debit_amount","remark","dataFromChild","buttonStatus"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Autocomplete from \"../entry/AutoComplete\";\nimport './account.css';\nimport Popup from \"reactjs-popup\";\n\n\nclass PurchaseDebit extends React.Component{\n    // Fetch machine list from server\n    fetchProduct = async () => {\n        try {\n            const responsePartyList = await fetch(\n                \"http://127.0.0.1:8000/list-of-purchaseparty/\" \n            );\n            const jsonPartyList = await responsePartyList.json();\n            \n            if(jsonPartyList.length > 0){\n                jsonPartyList.map(item =>\n                    this.setState({\n                        partyNamesFromApi: [...this.state.partyNamesFromApi, item.name]\n                    }) \n                );\n            }\n            else{\n                this.toggleLoadStatus();\n            }\n        }\n        catch {\n        }\n    };\n\n  // toggle load status\n  toggleLoadStatus = async () => {\n    if (this.state.loadingStatus.visibility === \"visible\") {\n      await this.setState({\n        loadingStatus: {\n          visibility: \"hidden\"\n        },\n        loadedStatus: {\n          visibility: \"visible\"\n        }\n      });\n    } else {\n      await this.setState({\n        loadingStatus: {\n          visibility: \"visible\"\n        },\n        loadedStatus: {\n          visibility: \"hidden\"\n        }\n      });\n    }\n  };\n    \n\n  //form Handler Submitting\n  onSubmit = async () => {\n    const responsDebitDetail = await fetch('http://127.0.0.1:8000/purchase-party-debit/', {\n        method: 'post',\n        headers: {'Content-Type':'application/json'},\n        body: JSON.stringify({\n            \"party\": this.state.selectedParty\n        })\n    });        \n    const jsonDebitDetail = await responsDebitDetail.json();\n\n    if(jsonDebitDetail.debits.length!=0)\n    {\n        this.setState({\n            minDate: jsonDebitDetail.debits[0].date\n        });\n        this.setState({\n            maxDate: jsonDebitDetail.debits.slice(-1)[0].date    \n        });\n    } \n    this.setState({\n        debitDetail: jsonDebitDetail,\n        input:{\n            display: \"none\"\n        },\n        table:{\n            display: \"block\"\n        }\n    });\n  };\n\n  \n    // Set final showing rows of table currentWork\n    setDateFilter = (item, index) => {\n        if(!this.state.minFilterDate){\n            this.state.minFilterDate= this.state.minDate;\n        }\n        if(!this.state.maxFilterDate){\n            this.state.maxFilterDate= this.state.maxDate;\n        }\n        if(this.state.minFilterDate <= item.date && item.date <= this.state.maxFilterDate){\n            this.state.currentDebit.push(item);\n        }\n    }\n\n\n    constructor(props){\n        super(props);\n        this.state= {\n            debitDetail: {\n                party: \"\",\n                contact: \"\",\n                village: \"\",\n                crasher: \"\",\n                debits: []\n            },\n            minDate: null,\n            maxDate: null,\n            minFilterDate: null,\n            maxFilterDate: null,\n            startDate: null,\n            endDate: null,\n            currentDebit: [],\n            selectedParty: \"\",\n            partyNamesFromApi: [],\n            input:{\n                display: \"block\"\n            },\n            table:{\n                display: \"none\"\n            },\n            loadingStatus: {\n                visibility: \"visible\"\n            },\n            loadedStatus: {\n                visibility: \"hidden\"\n            }\n        }\n        \n        this.fetchProduct= this.fetchProduct.bind(this);\n        this.onSubmit= this.onSubmit.bind(this);\n        this.setDateFilter= this.setDateFilter.bind(this);\n        this.toggleLoadStatus= this.toggleLoadStatus.bind(this);\n        this.fetchProduct();\n    }\n\n    componentDidMount(){\n        this.toggleLoadStatus();\n    }\n\n    render(){\n        //Clean old data\n        this.state.currentDebit=[];\n        \n        //  fill current debit\n        this.state.debitDetail.debits.forEach(this.setDateFilter);\n\n        return(\n            <div id=\"mainDiv\" className=\"d-flex justify-content-center align-items-center scrollingSection\">\n                <div className=\"tableShow\" style={this.state.table}>\n                    <div className=\"upperHeader row\">\n                        <div className=\"col-sm-2\">\n                            <blockquote className=\"commonFont blockquote text-center\">\n\t\t\t\t\t\t\t\t<p className=\"mb-0\"><b>{this.state.debitDetail.party}</b></p>\n\t\t\t\t\t\t\t</blockquote>                        \n                        </div>\n                        <div className=\"col-sm-2\">\n                            <blockquote className=\"commonFont blockquote text-center\">\n\t\t\t\t\t\t\t\t<p className=\"mb-0\">{this.state.debitDetail.contact}</p>\n\t\t\t\t\t\t\t</blockquote>                        \n                        </div>\n                        <div className=\"col-sm-2\">\n                            <blockquote className=\"commonFont blockquote text-center\">\n\t\t\t\t\t\t\t\t<p className=\"mb-0\">{this.state.debitDetail.village}</p>\n\t\t\t\t\t\t\t</blockquote>                        \n                        </div>\n                        <div className=\"col-sm-3\">\n                            <input type=\"date\" min={this.state.minDate} max={this.state.maxDate} onChange={e => {\n                                this.setState({\n                                    minFilterDate: e.target.value\n                                });\n                            }}/>\n                        </div>\n                        <div className=\"col-sm-3\">\n                            <input type=\"date\" min={this.state.minDate} max={this.state.maxDate} onChange={e => {\n                                this.setState({\n                                    maxFilterDate: e.target.value\n                                });\n                            }}/>\n                        </div>\n                    </div>\n\t\t\t\t\t<div className=\"highTable\">\n\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{/*Party and filter popup*/}\n\t\t\t\t\t\t\t<Popup modal trigger={\n\t\t\t\t\t\t\t\t<button className=\"bg-primary\">Party</button>\n\t                        } \n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<h4>{this.state.debitDetail.party}</h4>\n\t\t\t\t\t\t\t\t<h4>{this.state.debitDetail.contact}</h4>\n\t\t\t\t\t\t\t\t<h4>{this.state.debitDetail.village}</h4>\n\t\t\t\t\t\t\t\t<input type=\"date\" min={this.state.minDate} max={this.state.maxDate} onChange={e => {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tminFilterDate: e.target.value\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}/>\n\n\t\t\t\t\t\t\t\t<input type=\"date\" min={this.state.minDate} max={this.state.maxDate} onChange={e => {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tmaxFilterDate: e.target.value\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t</Popup>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"lowerHeader\">\n\t\t\t\t\t\t<table className=\"table table-borderd tablePart\">\n\t\t\t\t\t\t\t<thead className=\"thead-dark\">\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>Date</th>\n\t\t\t\t\t\t\t\t\t<th>Debit Amount</th>\n\t\t\t\t\t\t\t\t\t<th>Remark</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t{this.state.currentDebit.map((debit) => (\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td>{debit.date}</td>\n\t\t\t\t\t\t\t\t\t\t<td>{debit.debit_amount}</td>\n\t\t\t\t\t\t\t\t\t\t<td>{debit.remark}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n                <form\n                    className=\"form-container form-group\"\n                    style={this.state.input}\n                >\n                    <h3 style={this.state.loadingStatus}>There is no purchase party</h3>\n                    <div style={this.state.loadedStatus}>\n                        <p className=\"headingViewPart\">Purchase Party Debit</p>\n                        <br />\n\n                        <Autocomplete\n                            suggestions={this.state.partyNamesFromApi}\n                            callbackFromParent={dataFromChild => {\n                            this.state.selectedParty = dataFromChild;\n                            }}\n                            placeholderfrom={\"Party name\"}\n                        />\n                        <br />\n                        <br />\n                        <button\n                            type=\"button\"\n                            className=\"btn btn-outline-dark\"\n                            style={this.state.buttonStatus}\n                            onClick={e => this.onSubmit()}>\n                        Show\n                        </button>\n                    </div>    \n                </form>\n            </div>    \n        );\n    }\n}\n\nexport default PurchaseDebit;"]},"metadata":{},"sourceType":"module"}